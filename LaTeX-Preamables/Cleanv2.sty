
\usepackage[utf8]{inputenc}
\usepackage{amsmath, dsfont, mathtools, amssymb}
\usepackage{graphicx, float, caption}
\usepackage[most]{tcolorbox}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{circuitikz}
\usetikzlibrary{calc}
\usepackage{xcolor}
\usepackage{stringstrings}
\usepackage{colortbl}
\usepackage{listings, realboxes}
\usepackage{fancyhdr} % top link pacakge

\lstset{
    showspaces=false,
    basicstyle=\footnotesize,        % the size of the fonts that are used for the code
    breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
    breaklines=true,                 % sets automatic line breaking
    captionpos=b,                    % sets the caption-position to bottom
    commentstyle=\color{teal},    % comment style
    deletekeywords={...},            % if you want to delete keywords from the given language
    extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
    firstnumber=0,                % start line enumeration with line 0
    frame=single,	                   % adds a frame around the code
    keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
    keywordstyle=\color{blue},       % keyword style
    numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
    % numbersep=5pt,                   % how far the line-numbers are from the code
    % numberstyle=\tiny\color{gray}, % the style that is used for the line-numbers
    rulecolor=\color{gray},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
    showtabs=false,                  % show tabs within strings adding particular underscores
    stepnumber=0,                    % the step between two line-numbers. If it's 1, each line will be numbered
    stringstyle=\color{purple},     % string literal style
    tabsize=1,	                   % sets default tabsize to 2 spaces
    frameshape={RYR}{Y}{Y}{RYR},
    basicstyle=\ttfamily,
    showstringspaces=false,
    captionpos=t
}
% ------------------------------------ %
%             Customization            %
% ------------------------------------ %

\usepackage[letterpaper, top=1in, left=1in, right=1in, bottom=1in]{geometry}
\setlength{\parindent}{0em}
\setlength{\parskip}{0.5em}
\setlist[enumerate]{itemsep=-0.5em} % Adjust the spacing as desired
\setlist[itemize]{itemsep=-0.5em} % Adjust the spacing as desired
\renewcommand{\baselinestretch}{1.25}

\newtcolorbox{knBox}[2][]{
    enhanced,
    boxrule=0mm,
    toprule=0mm,
    bottomrule=0mm,
    left=1mm,
    right=1mm,
    leftrule=2pt,
    titlerule=0mm,
    toptitle=0mm,
    bottomtitle=0mm,
    top=0mm,
    colframe=gray!75!black,
    colback=gray!5!white,
    title=#2,
    fonttitle=\bfseries\sffamily\normalsize,fontupper=\normalsize,
    attach boxed title to top left={
                                    xshift=0mm,
                                    yshift=-\tcboxedtitleheight
                                    },  
    top=1.75em,
    boxed title style={
                        sharp corners,
                        size=small,
                        colback=gray!75!black,
                        colframe=gray!75!black,colbacktitle=white
                        },
    arc=0mm % Remove rounded corners
}

\newtcolorbox{definition}[2][]{
    enhanced,
    boxrule=0mm,
    toprule=0mm,
    bottomrule=0mm,
    left=1mm,
    right=1mm,
    leftrule=2pt,
    titlerule=0mm,
    toptitle=0mm,
    bottomtitle=0mm,
    top=0mm,
    colframe=green!40!black,
    colback=green!5!white,
    title=#2,
    fonttitle=\bfseries\sffamily\normalsize,fontupper=\normalsize,
    attach boxed title to top left={
                                    xshift=0mm,
                                    yshift=-\tcboxedtitleheight
                                    },  
    top=1.75em,
    boxed title style={
                        sharp corners,
                        size=small,
                        colback=green!40!black,
                        colframe=green!40!black,colbacktitle=white
                        },
    arc=0mm % Remove rounded corners
}

\newtcolorbox{theorem}[2][]{
    enhanced,
    boxrule=0mm,
    toprule=0mm,
    bottomrule=0mm,
    left=1mm,
    right=1mm,
    leftrule=2pt,
    titlerule=0mm,
    toptitle=0mm,
    bottomtitle=0mm,
    top=0mm,
    colframe=blue!40!black,
    colback=blue!5!white,
    title=#2,
    fonttitle=\bfseries\sffamily\normalsize,fontupper=\normalsize,
    attach boxed title to top left={
                                    xshift=0mm,
                                    yshift=-\tcboxedtitleheight
                                    },  
    top=1.75em,
    boxed title style={
                        sharp corners,
                        size=small,
                        colback=blue!40!black,
                        colframe=blue!40!black,colbacktitle=white
                        },
    arc=0mm % Remove rounded corners
}

\newtheorem{example}{Example}[section]

\hypersetup{
    colorlinks=true,
    linkcolor=purple    % Color for internal links
}

\newenvironment{amatrix}[1]{%
    \left[\begin{array}{@{}*{#1}{c}|c@{}}
            }{%
        \end{array}\right]
}

\newcommand{\note}[1]{\textcolor{gray}{\tiny #1}}

\Treatments{1}{1}{0}{1}{1}{1} %substring ignore parathesis
\newcommand{\documentname}{\substring{\jobname}{1}{9}}
\newcommand{\documentauthor}{Jax}
\newcommand{\documentauthorcontact}{enhanjax@connect.hku.hk}
\newcommand{\mathcolorbox}[2]{\colorbox{#1}{$\displaystyle #2$}}

\definecolor{superlightgray}{rgb}{0.9,0.9,0.9}

\AddToHook{cmd/section/before}{\clearpage}


% Makes it so each page has a back to top link on the right
\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{\hypersetup{linkcolor=gray}\hyperlink{toc}{Back to top}\hypersetup{linkcolor=blue}}
\renewcommand{\headrulewidth}{0pt}